<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>pan</name>
    <events>
        <variable comment="ID of the touch using to pan" constant="0" name="TouchPanID" sid="4307575874630259" static="0" type="number">-1</variable>
        <variable comment="Initial X position of touch (for pan)" constant="0" name="TouchLastX" sid="8247950022313521" static="0" type="number">0</variable>
        <variable comment="Initial Y position of touch (for pan)" constant="0" name="TouchLastY" sid="4563840306723032" static="0" type="number">0</variable>
        <comment>If the user touches, and we&apos;re not already panning with a different touch, store the touch ID and the position of the touch. Note we get the position of the touch from a separate layer which has a parallax of 0, otherwise panning the view would alter the reported touch position, resulting in confusing feedback loops.</comment>
        <event-block sid="9695464963241578">
            <conditions>
                <condition id="0" name="On any touch start" sid="9191104846563662" type="Touch" />
                <condition id="-14" name="Compare variable" sid="2164626215755954" type="System">
                    <param id="0" name="Variable">TouchPanID</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">-1</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="3579167274302501" type="System">
                    <param id="0" name="Variable">TouchPanID</param>
                    <param id="1" name="Value">Touch.TouchID</param>
                </action>
                <action id="-9" name="Set value" sid="4079024521537529" type="System">
                    <param id="0" name="Variable">TouchLastX</param>
                    <param id="1" name="Value">Touch.X(&quot;UI&quot;)</param>
                </action>
                <action id="-9" name="Set value" sid="5823382554629646" type="System">
                    <param id="0" name="Variable">TouchLastY</param>
                    <param id="1" name="Value">Touch.Y(&quot;UI&quot;)</param>
                </action>
            </actions>
        </event-block>
        <comment>While we have a touch to pan with, offset the scroll position by the change in position of the touch. This makes the view scroll with the touch.</comment>
        <event-block sid="5365707400980339">
            <conditions>
                <condition id="-14" name="Compare variable" sid="9932430961643623" type="System">
                    <param id="0" name="Variable">TouchPanID</param>
                    <param id="1" name="Comparison">5</param>
                    <param id="2" name="Value">0</param>
                </condition>
            </conditions>
            <actions>
                <action id="-7" name="Scroll to position" sid="3166862516685749" type="System">
                    <param id="0" name="X">scrollx - (Touch.X(&quot;UI&quot;) - TouchLastX) / LayerScale(&quot;Game&quot;)</param>
                    <param id="1" name="Y">scrolly - (Touch.Y(&quot;UI&quot;) - TouchLastY) / LayerScale(&quot;Game&quot;)</param>
                </action>
                <action id="-9" name="Set value" sid="4094903953510094" type="System">
                    <param id="0" name="Variable">TouchLastX</param>
                    <param id="1" name="Value">Touch.X(&quot;UI&quot;)</param>
                </action>
                <action id="-9" name="Set value" sid="5239704588193112" type="System">
                    <param id="0" name="Variable">TouchLastY</param>
                    <param id="1" name="Value">Touch.Y(&quot;UI&quot;)</param>
                </action>
            </actions>
        </event-block>
        <comment>When the touch we are panning with ends, reset the stored touch ID so we stop panning.</comment>
        <event-block sid="494157463361098">
            <conditions>
                <condition id="1" name="On any touch end" sid="8611059514455349" type="Touch" />
                <condition id="-14" name="Compare variable" sid="4351141601933288" type="System">
                    <param id="0" name="Variable">TouchPanID</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">Touch.TouchID</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="8581046602080429" type="System">
                    <param id="0" name="Variable">TouchPanID</param>
                    <param id="1" name="Value">-1</param>
                </action>
            </actions>
        </event-block>
    </events>
</c2eventsheet>
